{% extends "hyp/layout.html" %}
{% block content %}
  <h1>API Keys</h1>

  {% if perms.hyp.add_apikey %}
    <h2>
      <a href="{% url 'new_api_key' %}">
        Create API Key
      </a>
    </h2>
  {% endif %}

  <ul class="api-key-list">
  {% for api_key in api_keys %}
    <li> 
      <p>
        <span>
          {{ api_key.description }}
        </span>
        {% if api_key.is_active and perms.hyp.change_apikey%}
          <form action="{% url 'deactivate_api_key' api_key_id=api_key.id %}" method="patch" onsubmit="return confirm('This will break any API clients using this key. API keys cannot be reactivated. Are you sure?');">
            <input type="submit" value="Deactivate">
          </form>
        {% endif %}
      </p>
    </li>
  {% endfor %}
  </ul>
{% endblock %}
